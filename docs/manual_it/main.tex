% IOccultCalc Manuale Scientifico
% Documento LaTeX principale
\documentclass[11pt,a4paper,twoside]{book}

% Pacchetti
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[italian]{babel}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{graphicx}
% Imposta dimensioni default figure più grandi
\setkeys{Gin}{width=0.9\textwidth}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{natbib}
\usepackage{siunitx}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usetikzlibrary{arrows,shapes,positioning}
% Imposta dimensioni default grafici pgfplots più grandi
\pgfplotsset{
    width=0.85\textwidth,
    height=0.6\textwidth,
    tick label style={font=\normalsize},
    label style={font=\large},
    legend style={font=\normalsize}
}

% Geometria
\geometry{
    a4paper,
    left=25mm,
    right=25mm,
    top=30mm,
    bottom=30mm,
}

% Configurazione hyperref
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
    citecolor=green,
    pdftitle={IOccultCalc - Manuale Scientifico},
    pdfauthor={Michele Bigi - Gruppo Astrofili Massesi},
    pdfsubject={Previsione di Occultazioni Asteroidali ad Alta Precisione},
    pdfkeywords={occultazioni, asteroidi, astrometria, effemeridi}
}

% Configurazione listings
\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue}\bfseries,
    commentstyle=\color{green!60!black},
    stringstyle=\color{red},
    showstringspaces=false,
    breaklines=true,
    frame=single,
    numbers=left,
    numberstyle=\tiny\color{gray},
    language=C++
}

% Stile pagina
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\nouppercase{\rightmark}}
\fancyhead[RE]{\nouppercase{\leftmark}}

% Comandi personalizzati
\newcommand{\ioccultcalc}{\texttt{IOccultCalc}}
\newcommand{\vsop}{\texttt{VSOP87}}
\newcommand{\gaia}{\textit{Gaia}}
% \unit è già definito dal pacchetto siunitx
\newcommand{\deriv}[2]{\frac{\mathrm{d}#1}{\mathrm{d}#2}}
\newcommand{\pderiv}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\vect}[1]{\boldsymbol{#1}}
\newcommand{\mat}[1]{\boldsymbol{#1}}

% Font simile a Optima (elegante sans-serif)
% Opzione 1: URW Classico (più simile a Optima)
% \usepackage{classico}
% Opzione 2: Iwona (sans-serif elegante alternativo)
\usepackage{iwona}
% Fallback fonts
\usepackage{helvet}
\usepackage{courier}

% Spaziatura righe 1.3
\usepackage{setspace}
\setstretch{1.3}

% Informazioni frontespizio
\title{
    \huge\textbf{IOccultCalc} \\
    \vspace{0.5cm}
    \Large Manuale Scientifico per la Previsione di \\
    Occultazioni Asteroidali ad Alta Precisione \\
    \vspace{0.5cm}
    \large Versione 2.0
}

\author{
    \textbf{Michele Bigi} \\
    \texttt{mikbigi@gmail.com} \\
    \vspace{0.5cm}
    Gruppo Astrofili Massesi \\
    \vspace{0.5cm}
    \textit{Con contributi da:} \\
    Comunità Astrofili Italiana \\
    International Occultation Timing Association (IOTA) \\
    \vspace{0.3cm}
    \small \texttt{https://github.com/manvalan/IOccultCalc}
}

\date{Novembre 2025}

\begin{document}

% Frontespizio
\frontmatter
\maketitle

% Pagina copyright
\thispagestyle{empty}
\vspace*{\fill}
\begin{center}
\textbf{IOccultCalc - Manuale Scientifico}

\vspace{1cm}

Copyright \copyright\ 2025 Michele Bigi

\vspace{0.5cm}

\textbf{Gruppo Astrofili Massesi} \\
\url{http://www.astrofilimassesi.it}

\vspace{1cm}

Questo documento è rilasciato sotto licenza MIT. \\
Il software IOccultCalc è disponibile su GitHub: \\
\url{https://github.com/manvalan/IOccultCalc}

\vspace{1cm}

\textbf{Contatti:} \\
Email: \texttt{mikbigi@gmail.com}

\vspace{1cm}

\textit{Dedica:} \\
Questo lavoro è dedicato a tutti gli astrofili che, con passione e dedizione, \\
contribuiscono alla scienza attraverso l'osservazione delle occultazioni asteroidali.

\end{center}
\vspace*{\fill}
\clearpage

% Abstract
\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}

\ioccultcalc{} è una libreria professionale in C++ per il calcolo di previsioni ad alta precisione di occultazioni asteroidali. Questo manuale fornisce una descrizione scientifica completa degli algoritmi, delle formulazioni matematiche e dei metodi computazionali implementati nella libreria.

Il software raggiunge una precisione sub-chilometrica nella previsione del percorso d'ombra attraverso l'implementazione di algoritmi all'avanguardia tra cui:
\begin{itemize}
    \item Teoria planetaria completa VSOP87D per la posizione della Terra
    \item Integrazione numerica con metodo Runge-Kutta-Fehlberg 7(8)
    \item Correzioni relativistiche complete (aberrazione, tempo-luce, deflessione gravitazionale)
    \item Modello di precessione-nutazione IAU 2000A
    \item Elementi besseliani per il calcolo del percorso d'ombra
    \item Propagazione delle incertezze Monte Carlo
    \item Correzioni rigorose del moto proprio per le stelle \gaia{} DR3
\end{itemize}

La precisione raggiunta ($\pm 0.5$--$1$ km nel percorso d'ombra) rappresenta un miglioramento significativo rispetto al software esistente, rendendo \ioccultcalc{} adatto per campagne osservative professionali e ricerca scientifica.

Questo manuale è destinato ad astronomi, specialisti di astrometria e sviluppatori software che richiedono una comprensione dettagliata dei metodi computazionali impiegati.

% Prefazione
\chapter*{Prefazione}
\addcontentsline{toc}{chapter}{Prefazione}

Le occultazioni asteroidali offrono un'opportunità unica per determinare dimensioni, forme e compagni binari degli asteroidi con una precisione senza precedenti. Tuttavia, la previsione accurata di questi eventi richiede metodi computazionali sofisticati che tengano conto di numerosi effetti sottili nella meccanica celeste, relatività e astrometria.

Questo manuale documenta i fondamenti scientifici di \ioccultcalc{}, una libreria progettata per soddisfare i rigorosi requisiti di precisione della moderna previsione di occultazioni. Gli algoritmi qui descritti si basano sugli ultimi standard internazionali (IAU 2000/2006, Convenzioni IERS 2010) e sono validati rispetto a software di riferimento come OrbFit e JPL HORIZONS.

\section*{Obiettivi del Progetto}

Lo sviluppo di \ioccultcalc{} è stato motivato dalla necessità di:

\begin{enumerate}
    \item Maggiore precisione rispetto agli strumenti esistenti (es. Occult4)
    \item Implementazione open-source con documentazione completa
    \item Architettura software moderna adatta all'integrazione
    \item Quantificazione rigorosa delle incertezze
\end{enumerate}

Speriamo che questo manuale possa servire sia come riferimento per gli utenti della libreria, sia come risorsa educativa per chi è interessato agli aspetti matematici e computazionali dell'astronomia di posizione.

\vspace{1cm}
\noindent
\textit{Michele Bigi} \\
\textit{Gruppo Astrofili Massesi} \\
\textit{Novembre 2025}

% Indice
\tableofcontents

% Elenco figure
\listoffigures

% Elenco tabelle
\listoftables

% Elenco algoritmi
\listofalgorithms

% Contenuto principale
\mainmatter

% Include capitoli (stessi file del manuale inglese)
\include{chapters/01_introduzione}
\include{chapters/02_coordinate_systems}
\include{chapters/02b_celestial_mechanics}
\include{chapters/03_time_systems}
\include{chapters/04_planetary_ephemerides}
\include{chapters/04b_earth_position_optimizations}
\include{chapters/05_orbital_mechanics}
\include{chapters/06_numerical_integration}
\include{chapters/07_perturbations}
\include{chapters/08_relativistic_corrections}
\include{chapters/09_precession_nutation}
\include{chapters/10_stellar_astrometry}
\include{chapters/11_orbit_determination}
\include{chapters/12_asteroid_shape}
\include{chapters/13_besselian_method}
\include{chapters/14_uncertainty_propagation}
\include{chapters/15_implementation}
\include{chapters/16_validation}
\include{chapters/17_database_system}
\include{chapters/18_performance_optimization}
% \include{chapters/19_ricerca_occultazioni}  % TODO: Fix encoding UTF-8

% Appendici
\appendix
\include{chapters/appendice_a_costanti}
\include{chapters/appendice_b_algoritmi}
\include{chapters/appendice_c_jpl_tables}

% Bibliografia
\backmatter
\bibliographystyle{apalike}
\bibliography{../manual/references}

% Ringraziamenti
\chapter*{Ringraziamenti}
\addcontentsline{toc}{chapter}{Ringraziamenti}

Questo progetto non sarebbe stato possibile senza il contributo e il supporto di numerose persone e organizzazioni:

\begin{itemize}
    \item Il \textbf{Gruppo Astrofili Massesi} per il supporto continuo e l'ambiente stimolante
    \item La \textbf{International Occultation Timing Association (IOTA)} per i dati e le risorse
    \item Il \textbf{Minor Planet Center (MPC)} per gli elementi orbitali e le osservazioni
    \item L'\textbf{ESA Gaia Mission} per il catalogo stellare Gaia DR3
    \item Il \textbf{JPL/NASA} per le effemeridi DE441 e il sistema SPICE
    \item \textbf{Dave Herald} per il lavoro pionieristico con Occult4
    \item \textbf{Steve Preston} per i contributi alla comunità delle occultazioni
    \item La comunità \textbf{astrofili italiana} per le osservazioni e il feedback
    \item Tutti i contributori del progetto open-source su GitHub
\end{itemize}

Un ringraziamento speciale a tutti gli osservatori di occultazioni che, con le loro osservazioni pazienti e precise, forniscono dati preziosi per la scienza.

\vspace{1cm}
\noindent
\textit{Ad astra per aspera}

\end{document}
